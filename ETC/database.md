1.용어설명

- 데이터와 정보

    - 데이터 : 현실세계에서 관찰하거나 측정한 사실 또는 값

    - 정보 : 의사결정에 활용하기 위해 데이터를 처리한 결과물

- 데이터베이스

    - 데이터베이스 : 데이터의 모임

        - 특정 조직의 다수 사용자가 공유하여 사용하도록 통합해서 저장한 운영 데이터의 집합

        - 특징

            - 자기 기술성 : DB 시스템이 데이터베이스 자체와 구조 및 제약조건 정의(메타데이터)를 가지고 있음

            - 프로그램과 데이터의 분리 : 프로그램-데이터 독립성

            - 데이터 추상화 : 데이터 모델을 사용하여 자세한 내용은 은닉하고 개념적 뷰만을 제공

            - 데이터에 대한 다중 뷰의 제공 : 관심있는 일부 데이터를 뷰로 정리 가능

            - 데이터의 공유와 다수 사용자 트랜잭션 처리

                - 다수 사용자용 DBMS

                - 트랜잭션 : DB작업의 수행 단위, ACID성질

- 데이터베이스 관리 시스템과 데이터베이스 시스템
    - DBMS : DataBase Management System
        - DB의 생성과 관리를 담당하는 소프트웨어 패키지
        - DBMS는 운영체제와 함께 중요한 시스템 소프트웨어 패키지로 분류
        - Oracle, IBM DB2, Sybase, MS-SQL, MySQL

        - 등장배경 - 파일 시스템의 문제점

            - 데이터 중복성 : 저장공간 낭비 및 데이터의 일관성과 무결성 유지 어려움

            - 데이터 종속성 : 사용하는 파일 구조를 변경하면 프로그램도 같이 변경 필요

    - 데이터베이스 시스템 : 데이터베이스 자체 + 이를 관리하는 SW(DBMS+응용프로그램)통칭
        - DBMS와 혼용하여 많이 사용

- 데이터 제약조건

    - 각 컬럼에서 데이터들이 가질 수 있는 특징을 표현.

    - 기본키 조건, 외래키, UNIQUE, NOT NULL 조건 등...

- 약한 엔티티 타입

    - 자신의 키 애트리뷰트가 없는 엔티티 타입

    - 애트리뷰트 중 하나가 다른 엔티티타입(식별 엔티티타입)과 연계됨으로써 식별가능

    - 강한- : 키를 가지는 일반 엔티티타입

    - 이중사각형으로 표시. 약한 엔티티가 식별엔티티와 맺는 관계는 이중마름모로 표현

- 함수적 종속성 집합의 최소커버

- 정규화

    - 불만족스러운 '나쁜'릴레이션의 애트리뷰트들을 나누어 더 작은 좋은 릴레이션으로 분해하는 과정
- loseless decomposition

    - 정보의 손실. 스키마분해 할때 발생할 수 있다.

- 제2정규형 정의
    - 1NF여야 한다.

    - 부분적 함수 의존이 없어야 한다.
- BCNF정의

    - 제3정규형을 확장한 것.

    - 이 정규형에 가까워질수록 데이터의 중복성이 배제되어 갱신시에 부정합 또는 불일치가 잘 생기지 않는다.

    - 모든 결정자가 후보키가 되도록 한다.

2. DB 개념

- 데이터베이스 등장배경?

    - 데이터베이스는 현실 세계에 존재하는 많은 데이터들을 효과적이게 처리하려고 만들었다.
- 3-tier 데이터 모델(고수준, 표현, 물리적)에 대해 설명하시오.

    - 고수준 데이터 모델

        - 일반 사용자들이 이해하는 데이터 표현
        - HW독립적 ER모델 (컴 사양이 어떤지는 상관없음)

    - 표현(구현)데이터 모델

        - 일반사용자도 이해하고 컴퓨터상에 구현도 가능
        - DBMS에서 많이 사용(관계 데.모, 계층 데.모, 네트워크 데.모 모델)

    - 저수준(물리적)데이터 모델

        - 데이터가 컴에 저장되는 방식을 표현
        - HW의존적

        - 레코드 형식, 순서, 인덱스 등

- 논리적, 물리적 데이터 독립성이란?

    - 논리적 데이터 독립성

        - 외부 스키마나 응용프로그램을 변경하지 않으면서도 개념 스키마를 변경할 수 있는 능력(성질)

    - 물리적 데이터 독립성

        - 개념 스키마를 변경하지 않으면서 내부 스키마를 변경할 수 있는 능력(성질)

        - 인덱스 구조 등의 변경에도 개념 스키마(ex-테이블구조)는 영향을 받지 않는 능력

3.관계형 데이터베이스 개념과 관련한 아래 질문에 답하시오.

- 관계형 데이터 모델의 릴레이션 스키마, 릴레이션, 도메인, 투플에 대해 설명하시오.

    - 용어

        - 테이블->릴레이션      행->투플        열->애트리뷰트

        - 도메인 : (애트리뷰트가 가질 수 있는) 원자값들의 집합
            - ex) 전화번호->11자리 번호들의 집합, Names : 개인 이름들의 집합.

        - 데이터 타입 : 도메인은 실제 데이터 타입으로 명시함
            - ex) string, integer, real

    - 릴레이션 스키마

        - 릴레이션 이름 R과 애트리뷰트 A들의 집합으로 R(A1, A2...An)로 표기

        - 릴레이션 스키마 R(A1, A2...An)의 투플 t

            - 값들의 (순서화된) 집합 t=<V1, V2...Vn>

        - 릴레이션 스키마 R에 대한 릴레이션(또는 릴레이션 인스턴스) r 또는 r(R)

            - 투플의 집합; r=r(R)={t1, t2...tm)
            - r(R)은 실세계의 특정 상태를 반영

- 슈퍼키, 후보키, 기본키를 비교 설명하시오.

    - 슈퍼키 : 릴레이션 r의 투플들을 고유 식별 가능한 애트리뷰트의 집합

    - 키: 최소성을 만족하는 슈퍼키

    - 후보키: 릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별하기 위해 사용하는 속성들의 부분집합. 기본키로 사용할 수 있는 속성들.

    - 기본키 : 후보키중에서 선택한 키

- 관계형 데이터 모델의 5가지 제약조건에 대해 설명하시오.

    - 제약 조건 : 모든 릴레이션 인스턴스들이 만족해야하는 조건
        - a.k.a 데이터 무결성 제약조건

    - 데이터 모델 스키마에서 DDL을 통해 직접 표현 가능한 제약조건

        - 도메인 제약조건

            - 각 애트리뷰트 A의 값은 반드시 A의 도메인 dom(A)에 속하는 원자값이어야 함

        - 키 제약조건

            - 릴레이션은 투플의 집합으로 정의되므로, 모든 원소는 중복이 안됨

            - 어떤 두 투플도 릴레이션의 모든 애트리뷰트에 대해 같은 값들의 조합을 가질 수 없음

                - 슈퍼키 : 릴레이션 r의 투플들을 고유 식별 가능한 애트리뷰트의 집합

                - 키: 최소성을 만족하는 슈퍼키

                - 기본키 : 릴레이션의 여러 키(후보키)중에서 선택한 키

        - 널에 대한 제약조건

            - 애트리뷰트 값으로 널을 허용안하면 널 못가짐

        - 엔티티 무결성 제약조건(==개체 무결성 제약조건)

            - 기본키가 각 투플들을 식별하는 데 이용되기 때문에 어떠한 기본키도 널 값 못가짐

        - 참조 무결성 제약조건

            - 한 릴레이션에 있는 투플이 다른 릴레이션에 있는 투플을 참조하려면 반드시 참조되는 투플이 그 릴레이션 내에 존재해야 함

            - 하나의 릴레이션 R에서 속성 F의 값으로 다른 릴레이션 S의 기본키 P값을 참조하는 경우에 R과 S는 참조 무결성 제약조건을 가진다고 함(F는 null을 가질 수 있음)

4. DB설계의 개체-관계 모델링 에 대한 다음 질문에 답하시오.

- 관계의 유형을 분류하고 설명하시오.

    - 일대일

        - 스키마에서 실선으로 연결

        - 부모 테이블 하나의 행이 자식 테이블 하나의 행과 연결

    - 일대다

        - 연결선: 한쪽끝에 화살표

    - 다대다

        - 여러명의 여자와 여러켤레의 신발

        - 연결 테이블 사용. 연결 테이블은 각 테이블의 키를 가지고 있다.

- 개념 데이터 모델로부터 논리 데이터 모델로 변환하는 규칙을 설명하시오.

    - 논리적 설계

        - 개념
            - ER다이어그램으로 표현된 개념적 구조를 DB에 저장할 형태로 표현한 논리적 구조

            - 관계 데이터 모델, 계층 데이터 모델, 네트워크 데이터모델 등이 있다.

            - 개념 데이터 모델로부터 논리 데이터 모델로 변환하는 규칙에 따라 논리데이터 모델을 생성

        - 매핑1단계: 정규엔티티->릴레이션

            - 엔티티 타입은 릴레이션으로 매핑

            - 모든 단순 애트리뷰트 포함

            - 엔티티타입의 키 중 하나를 기본키로 지정

        - 매핑2단계: 약한엔티티->릴레이션

            - 약한 엔티티 타입을 릴레이션으로 매핑

            - 모든 단순 애트리뷰트 포함

            - 소유 릴레이션의 키 속성을 포함

            - 생성된 릴레이션의 기본 키는 소유 릴레이션의 키와 약한 엔티티 타입의 부분키를 합쳐서 만든다.

        - 매핑3단계: 1:1관계->외래키

            - 외래키 접근방식

                - 한 릴레이션(S)를 선택하여 T의 기본키를 S의 외래키로 표현. S는 완전참여 릴레이션을 선택하는 것이 좋음

                - 관계타입의 모든 단순 애트리뷰트를 S에 포함시킴

                - 이 방식이 가장 유용. 다른 방식은 참조만 할것

            - 합병 릴레이션 접근방식

                - 두 릴레이션을 하나의 릴레이션으로 통합. 두 릴레이션이 모두 완전참여일때 좋음

            - 교차 참조/관계 릴레이션 접근방식
                - S와 T를 교차참조하는 제 3의 릴레이션 R생성

        - 매핑 4단계: 1:N관계->외래키

            - 외래키 접근 방식(권장)
                - N측의 릴레이션(S)를 선택하여 1측의 릴레이션 T의 기본키를 S의 외래키로 포함

                - 관계타입의 모든 단순 애트리뷰트를 S에 포함시킴

            - 교차 참조/관계 릴레이션 접근방식(권장 X)
                - S와 T를 교차 참조하는 제 3의 릴레이션 R생성

        - 매핑 5단계: M:N관계->릴레이션

            - 별도의 릴레이션(관계 릴레이션이라고 부름)으로 생성하고, 관계에 참여하는 두 릴레이션의 기본 키를 각각 참조하는 외래키로 애트리뷰트를 고성

            - 이 때 두 외래키가 관계 릴레이션의 기본키를 형성

        - 매핑 6단계: 다중키 애트리뷰트->릴레이션

            - 릴레이션 R의 다중키 애트리뷰트는 R의 기본키를 포함하는 새로운 릴레이션으로 매핑된다.

            - 새로운 릴레이션의 키는 R의 기본키와 다중키 애트리뷰트의 조합이다.

        - 매핑 7단계: N차 관계->릴레이션

            - 관계에 참여하는 n개 릴레이션들의 키들로 구성되는 관계 릴레이션으로 매핑된다.

            - 관계 릴레이션의 애트리뷰트들은 참여 릴레이션의 기본키를 참조하는 외래키들과 관계속성(들)으로 구성된다.

- 우측의 Bank ER 모델을 보고 스키마를 만들어낸 요구 사항과 제약조건들을 찾아내어 명세화하시오.

    - 하나의 BANK는 여러개의 Branch들과 연결되어있다.
        - BANK는 코드, 이름, 주소 를 가진다.

        - 코드는 유일하다.
        - Branch는 주소, 번호 를 가진다.
        - Branch마다 번호는 유일하다.

    - 각 Branch들은 돈을 맡아줄수도 있고, 빌려줄수도 있다.
    - ACCOUNT는 번호, 밸런스, 타입 을 가진다.

        - 번호는 유일하다.

        - 브랜치와 1:N관계를 가진다.(ACCTS)
    - LOAN은 번호, 양, 타입을 가진다.

        - 번호는 유일하다.

        - 브랜치와 1:N관계를 가진다.(LOANS)
    - CUSTOMER는 폰, 주민번호, 이름, 주소 를 가진다.

- 우측의 Bank ER 모델을 보고 논리데이터 모델로 변환 한 결과를 제시하시오.

5. DB설계 정규화

- 갱신이상

    - 하나의 릴레이션에 하나 이상 엔티티의 애트리뷰트들을 혼합하는 것은 여러가지 문제를 일으킴

        - 정보가 중복 저장되며, 저장공간 낭비하게 됨.

        - 갱신 이상(데이터 수정, 삭제 등 할때...)이 발생하게 된다 == 동일한 정보를 한 릴레이션에는 변경하고, 나머지 릴레이션에서는 변경하지 않은 경우 어느 것이 정확한지 알 수 없음.

    - 갱신이상 종류

        - 삽입이상

        - 삭제이상

        - 수정이상

        - 해결책 ==>스키마를 분해

- 함수적 종속성

    - 좋은 릴레이션 설계의 정형적 기준으로 사용
    - FD와 키는 릴레이션의 정규형을 정의하기 위해 사용
    - FD 는 데이터 애트리뷰트들의 의미와 애트리뷰트들간의 상호관계로부터 유도되는 제약조건의 일종

- 주어진 BOOK 릴레이션에 대해 아래 종속성이 성립한다
    - BOOK( title, author_name, book_type, list_price, author_affiliation, publisher)
    - FD: title -> book_type, publisher
        - book_type -> list_price
        - author_name -> author_affiliation
    - BOOK 릴레이션에서 title이 후보키인가? {title, author_name}은 후보키인가?
        - title은 후보키가 아니다.(a_n과 a_a를 결정 못함)
        - title,a_n은 후보키다. 모두를 결정할 수 있다.

    - 이 릴레이션은 어떤 정규형에 속하는가? 이유는?
        - 1NF. 부분적 함수 종속이 있으므로.

        - 키가 아닌 열이 합성키의 일부에 종속된다.

    - 릴레이션을 더이상 분해할 수 없을때까지 정규화하되, 각 분해에 대해 이유를 제시하시오.

6.우측 릴레이션 스키마를 참고하여 SQL에 대한 다음 질문에 답하시오.

- 우측의 릴레이션 스키마를 참고하여 Department 테이블을 생성하는 SQL문을 작성하시오.(단, 기본키, 외래 키관계 및 dname이 유일함을 표현하 고, 투플이 가지는 값는 ('정보기획부', 100, 'E12345678', '2013-11-01')의 형태임)
    - CREATE TABLE Department (
    -   DNAME CHAR(50) UNIQUE NOT NULL ,
    -   DNUMBER INT,
    -   MGRSSN CHAR(50),
    -   MGRSTARTDATE DATE,
    -   PRIMARY KEY(DNAME)
    - );
- ('정보기획부', 100, 'E12345678', '2013-11-01')의 레코드를 삽입하는 SQL은?
    - INSERT INTO Department VALUES('정보기획부', 100, 'E12345678', '2013-11-01');

- 사원정보를 저장하고 있는 employee_add.xls라는 Excel 문서를 이용하여 MySQL의 company DB에 있는 employee 테이블에 대량으로 레 코드를 추가하려고 한다. 처리과정을 설명하고 필요 명령어를 제시하시오.
    - Excel파일을 csv형식으로 변환하고, LOAD DATA를 한다.
    - LOAD DATA LOCAL INFILE 'D:\\data\\employee_add.csv'
    -   INTO TABLE employee FIELDS TERMINATED BY ",";
- '인사부'의 관리사원을 'E11223344'로 변경하는 SQL은?
    - UPDATE Department SET MGRSSN='E11223344' WHERE DNAME='인사부';

- 주소가 서울시인 모든 종업원의 수를 구하는 SQL은?.
    - SELECT COUNT(DISTINT FNAME) WHERE ADDRESS='서울시' FROM EMPLOYEE;

- 프로젝트 총 근무시간이 1000시간이 넘는 사원을 찾는 SQL은?
    - SELECT ESSN FROM WORKS_ON WHERE HOURS>1000;
